# Passman - корпоративный менеджер паролей

Программа позволяет хранить пароли и распределять доступ между группами пользователей. Регистрация в программе ограничена инвайт кодами, которые создаёт администратор.

Первый пользователь admin/admin - сразу же смените пароль после первого входа.

## 1. Установка переменных окружения в файле env

Данные для подключения к БД

- **POSTGRES_DB** - название для базы данных
- **POSTGRES_USER** - имя пользователя БД
- **POSTGRES_PASSWORD** - пароль БД
- **FRONTEND_PORT** - Порт приложения
- **BACKEND_PORT** - порт для бэкэнда
- **DB_PORT** - порт для БД

- **FRONTEND_URL** - URL на котором будет открываться фронт приложения, используется для генерации ссылок в письмах

- **ASPNETCORE_ENVIRONMENT** - Development - по умолчания если хотите просмтривать swagger, Production нужно указать явно если нужно скрыть swagger

Данные для отправки писем через почтовый сервер. Подключение по SMTP

- **EMAIL_HOST**
- **EMAIL_PORT**
- **EMAIL_EMAIL**
- **EMAIL_PASSWORD**

## 2. Настройка файла config.js

Расположение относительно docker-compose.yaml ./config/config.js

```js
window.config = {};
window.config.BACKEND_URL = 'http://YOUR_BACKEND_URL:2058/api/v1';
```

## 3. Запуск

```bash
docker-compose up
```

## Доп сведения

- При необоходимости подключить программу к внешней БД можно удалить сервис db из dockercompose файла, а для backend указать свои данные для подключения к БД.

- При разворачивании нового экземпляра программы будет автоматически сгенерирован RSA ключ для шифрования паролей. Он будет помещён рядом с исполняемым файлом и иметь относительный путь ./RSA/key.xml

- При разворачивании в докере необходимо поместить ключ RSA в volume или привязать его к локальной папке.

- В случае переноса экземпляра программы при разворачивании можно перенести ключ шифрования и копию БД через волюмы, путём привязки их к локальной папке

- Экспорт в формате passman.json имеет булевый параметр encrypted, который позволяет делать экспорт в открытую с расшифрованными паролями, либо с зашифрованными.

- В случае экспорта с зашифрованными паролями этот файл можно импортировать в другой экземпляр приложения, предварительно подсунув туда тот же ключ шифрования.

- Чтобы использовать самую последнюю версию приложения, можно склонировать репозитеории бэка и фронта, ветки dev, сбилдить их образы и использовать их в docker-compose файле
